(this["webpackJsonpredux-would-you-rather"]=this["webpackJsonpredux-would-you-rather"]||[]).push([[0],{64:function(e,t,a){e.exports=a(78)},69:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(24),u=a.n(o),c=(a(69),a(11)),i=a(12),l=a(14),s=a(13),m=a(8),d=a(20),b=a(7),p=a(63);var h=a(10),v=a(5),E={sarahedo:{id:"sarahedo",name:"Sarah Edo",avatarURL:"https://avatars.dicebear.com/api/bottts/hello.svg?w=60&h=60",answers:{"8xf0y6ziyjabvozdd253nd":"optionOne","6ni6ok3ym7mf1p33lnez":"optionTwo",am8ehyc8byjqgar0jgpub9:"optionTwo",loxhs1bqm25b708cmbf3g:"optionTwo"},questions:["8xf0y6ziyjabvozdd253nd","am8ehyc8byjqgar0jgpub9"]},tylermcginnis:{id:"tylermcginnis",name:"Tyler McGinnis",avatarURL:"https://avatars.dicebear.com/api/bottts/dog.svg?w=60&h=60",answers:{vthrdm985a262al8qx3do:"optionOne",xj352vofupe1dqz9emx13r:"optionTwo"},questions:["loxhs1bqm25b708cmbf3g","vthrdm985a262al8qx3do"]},johndoe:{id:"johndoe",name:"John Doe",avatarURL:"https://avatars.dicebear.com/api/bottts/bird.svg?w=60&h=60",answers:{xj352vofupe1dqz9emx13r:"optionOne",vthrdm985a262al8qx3do:"optionTwo","6ni6ok3ym7mf1p33lnez":"optionTwo"},questions:["6ni6ok3ym7mf1p33lnez","xj352vofupe1dqz9emx13r"]}},O={"8xf0y6ziyjabvozdd253nd":{id:"8xf0y6ziyjabvozdd253nd",author:"sarahedo",timestamp:1467166872634,optionOne:{votes:["sarahedo"],text:"have horrible short term memory"},optionTwo:{votes:[],text:"have horrible long term memory"}},"6ni6ok3ym7mf1p33lnez":{id:"6ni6ok3ym7mf1p33lnez",author:"johndoe",timestamp:1468479767190,optionOne:{votes:[],text:"become a superhero"},optionTwo:{votes:["johndoe","sarahedo"],text:"become a supervillain"}},am8ehyc8byjqgar0jgpub9:{id:"am8ehyc8byjqgar0jgpub9",author:"sarahedo",timestamp:1488579767190,optionOne:{votes:[],text:"be telekinetic"},optionTwo:{votes:["sarahedo"],text:"be telepathic"}},loxhs1bqm25b708cmbf3g:{id:"loxhs1bqm25b708cmbf3g",author:"tylermcginnis",timestamp:1482579767190,optionOne:{votes:[],text:"be a front-end developer"},optionTwo:{votes:["sarahedo"],text:"be a back-end developer"}},vthrdm985a262al8qx3do:{id:"vthrdm985a262al8qx3do",author:"tylermcginnis",timestamp:1489579767190,optionOne:{votes:["tylermcginnis"],text:"find $50 yourself"},optionTwo:{votes:["johndoe"],text:"have your best friend find $500"}},xj352vofupe1dqz9emx13r:{id:"xj352vofupe1dqz9emx13r",author:"johndoe",timestamp:1493579767190,optionOne:{votes:["johndoe"],text:"write JavaScript"},optionTwo:{votes:["tylermcginnis"],text:"write Swift"}}};function f(e){return new Promise((function(t,a){var n=e.author,r=function(e){var t=e.optionOneText,a=e.optionTwoText,n=e.author;return{id:Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),timestamp:Date.now(),author:n,optionOne:{votes:[],text:t},optionTwo:{votes:[],text:a}}}(e);setTimeout((function(){O=Object(v.a)(Object(v.a)({},O),{},Object(h.a)({},r.id,r)),E=Object(v.a)(Object(v.a)({},E),{},Object(h.a)({},n,Object(v.a)(Object(v.a)({},E[n]),{},{questions:E[n].questions.concat([r.id])}))),t(r)}),1e3)}))}function j(){return function(e){return Promise.all([new Promise((function(e,t){setTimeout((function(){return e(Object(v.a)({},E))}),1e3)})),new Promise((function(e,t){setTimeout((function(){return e(Object(v.a)({},O))}),1e3)}))]).then((function(e){var t=Object(p.a)(e,2);return{users:t[0],questions:t[1]}})).then((function(t){var a=t.users,n=t.questions;e(function(e){return{type:"RECEIVE_USERS",users:e}}(a)),e(function(e){return{type:"RECEIVE_QUESTIONS",questions:e}}(n))}))}}function y(e,t){return function(a,n){var r=n().authedUser;(function(e){var t=e.authedUser,a=e.qid,n=e.answer;return new Promise((function(e,r){setTimeout((function(){E=Object(v.a)(Object(v.a)({},E),{},Object(h.a)({},t,Object(v.a)(Object(v.a)({},E[t]),{},{answers:Object(v.a)(Object(v.a)({},E[t].answers),{},Object(h.a)({},a,n))}))),O=Object(v.a)(Object(v.a)({},O),{},Object(h.a)({},a,Object(v.a)(Object(v.a)({},O[a]),{},Object(h.a)({},n,Object(v.a)(Object(v.a)({},O[a][n]),{},{votes:O[a][n].votes.concat([t])}))))),e()}),500)}))})({authedUser:r,qid:e,answer:t}).then((function(){a(function(e,t,a){return{type:"SAVE_QUESTION_ANSWER",authedUser:e,qid:t,answer:a}}(r,e,t)),a(function(e,t,a){return{type:"USER_ANSWER_QUESTION",auth:e,qid:t,option:a}}(r,e,t))}))}}var w=a(60),g=a(54),x=a(6),T=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.question,a=e.user;return r.a.createElement(x.a,null,r.a.createElement(x.a.Body,null,r.a.createElement(x.a.Subtitle,{className:"mb-2 text-muted"},r.a.createElement("img",{src:a[t.author].avatarURL,alt:"Avatar of ".concat(a.name)})," ",a[t.author].name," asks"),r.a.createElement(x.a.Title,null,"Would You rather?"),r.a.createElement(d.b,{to:"/questions/".concat(t.id)},r.a.createElement(x.a.Text,null,t.optionOne.text," or..."))))}}]),a}(n.Component);var S=Object(m.b)((function(e,t){var a=t.qID;return{question:e.questions[a],authedUser:e.authedUser,user:e.users}}))(T),U=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.answeredQuestions,a=e.unansweredQuestions;return r.a.createElement("div",null,r.a.createElement(w.a,{defaultActiveKey:"unanswered",transition:!1,id:"questions-tab"},r.a.createElement(g.a,{eventKey:"unanswered",title:"Unanswered Questions"},r.a.createElement("div",null,a.map((function(e){return r.a.createElement("div",{key:e},r.a.createElement(S,{qID:e}))})))),r.a.createElement(g.a,{eventKey:"answered",title:"Answered Questions"},r.a.createElement("div",null,t.map((function(e){return r.a.createElement("div",{key:e},r.a.createElement(S,{qID:e}))}))))))}}]),a}(n.Component);var q=Object(m.b)((function(e){var t=e.questions,a=e.users,n=e.authedUser,r=a[n],o=Object.keys(r.answers).sort((function(e,a){return t[a].timestamp-t[e].timestamp})),u=Object.keys(t).filter((function(e){return!o.includes(e)})).sort((function(e,a){return t[a].timestamp-t[e].timestamp}));return{answeredQuestions:o,unansweredQuestions:u,authedUser:n}}))(U);var k=a(16),A=a(30),I=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={userId:""},e.onFormSubmit=function(t){var a=e.state.userId,n=e.props.authenticate;a?n(a):alert("Please select a user to continue"),t.preventDefault()},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.users,a=this.state.userId;return r.a.createElement("div",null,r.a.createElement(k.a,null,r.a.createElement(k.a.Group,{controlId:"exampleForm.ControlSelect1"},r.a.createElement(k.a.Label,null,"Login to continue:"),r.a.createElement(k.a.Control,{as:"select",value:a,onChange:function(t){return e.setState({userId:t.target.value})}},r.a.createElement("option",{value:"",disabled:!0},"Select user"),Object.keys(t).map((function(e){return r.a.createElement("option",{value:e,key:e},t[e].name)})))),r.a.createElement(A.a,{className:"btn",disabled:null===a,onClick:this.onFormSubmit},"Login")))}}]),a}(n.Component);var R=Object(m.b)((function(e){return{users:e.users}}),(function(e){return{authenticate:function(t){e(function(e){return{type:"SET_AUTHED_USER",id:e}}(t))}}}))(I),C=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"CLEAR_AUTHED_USER"})}},{key:"render",value:function(){return r.a.createElement(b.a,{to:"/"})}}]),a}(n.Component),N=Object(m.b)()(C),_=a(17),D=a(34),Q=a(61),L=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={navOpen:!1},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.authedUser,o=t.user;return r.a.createElement(Q.a,null,r.a.createElement(D.a,{bg:"light",className:"bg-light"},r.a.createElement(D.a.Brand,null,r.a.createElement(d.b,{to:"/",className:"navbar-brand"},"Would You Rather?")),a&&r.a.createElement(n.Fragment,null,r.a.createElement(D.a.Toggle,{onClick:function(){return e.setState({navOpen:!e.state.navOpen})}}),r.a.createElement(D.a.Collapse,{className:"justify-content-end"},r.a.createElement(_.a,{activeKey:"/"},r.a.createElement(_.a.Item,null,r.a.createElement(_.a.Link,{as:d.b,to:"/"},"Home")),r.a.createElement(_.a.Item,null,r.a.createElement(_.a.Link,{as:d.b,to:"/leaderboard"},"Leaderboard")),r.a.createElement(_.a.Item,null,r.a.createElement(_.a.Link,{as:d.b,to:"/add"},"New Question")),r.a.createElement(_.a.Item,null,r.a.createElement(_.a.Link,{as:d.b,to:"/Logout"},"Logout")),r.a.createElement(_.a.Item,null,r.a.createElement("img",{src:o.avatarURL,className:"nav-avatar",alt:"Avatar of ".concat(o.name)})),r.a.createElement(_.a.Item,{className:"nav-user"},"Welcome ",o.name))))))}}]),a}(n.Component);var z=Object(b.g)(Object(m.b)((function(e){var t=e.authedUser;return{authedUser:t,user:e.users[t]}}))(L));var W=Object(m.b)((function(e){var t=e.users,a=function(e){return Object.keys(e.answers).length+e.questions.length};return{users:Object.values(t).sort((function(e,t){return a(t)-a(e)}))}}))((function(e){var t=e.users;return r.a.createElement("div",null,t.map((function(e,t){return r.a.createElement(x.a,{key:t},r.a.createElement("img",{alt:"avatar",className:"avatar",src:e.avatarURL}),r.a.createElement(x.a.Title,null,e.name),r.a.createElement(x.a.Text,null,Object.keys(e.answers).length," Answered"),r.a.createElement(x.a.Text,null,e.questions.length," Created"),r.a.createElement(x.a.Text,null,Object.keys(e.answers).length+e.questions.length," Total"))})))})),P=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={optionOne:"",optionTwo:"",redirect:!1},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n=a.optionOne,r=a.optionTwo;e.props.addQuestion(n,r),e.setState({redirect:!0})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this;if(this.state.redirect)return r.a.createElement(b.a,{to:"/"});var t=this.state,a=t.optionOne,n=t.optionTwo;return r.a.createElement("div",null,r.a.createElement(x.a,null,r.a.createElement(x.a.Body,null,r.a.createElement(x.a.Title,null,"Would You rather?"),r.a.createElement(k.a,{onSubmit:this.handleSubmit},r.a.createElement(k.a.Group,null,r.a.createElement(k.a.Control,{type:"text",placeholder:"Question One",value:a,onChange:function(t){return e.setState({optionOne:t.target.value})}}),r.a.createElement("br",null),r.a.createElement(k.a.Control,{type:"text",placeholder:"Question Two",value:n,onChange:function(t){return e.setState({optionTwo:t.target.value})}}),r.a.createElement("br",null),r.a.createElement(A.a,{disabled:""===a||""===n,type:"submit"},"Submit"))))))}}]),a}(n.Component);var B=Object(m.b)(null,(function(e){return{addQuestion:function(t,a){var n,r;e((n=t,r=a,function(e,t){var a=t().authedUser;return f({optionOneText:n,optionTwoText:r,author:a}).then((function(t){e(function(e){return{type:"ADD_QUESTION",question:e}}(t)),e(function(e,t){return{type:"ADD_USER_QUESTION",authedUser:e,qid:t}}(a,t.id))}))}))}}}))(P),F=function(){return r.a.createElement(x.a,null,r.a.createElement(x.a.Header,null,"404"),r.a.createElement(x.a.Body,null,r.a.createElement(x.a.Title,null,"Page Not Found")))},H=a(55),V=a(56),M=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={selectedOption:""},e.handleSubmit=function(t){t.preventDefault(),e.props.saveQuestionAnswer(e.state.selectedOption)},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.question,n=t.users,o=t.authedUser;if(!a)return r.a.createElement(F,null);var u,c=this.state.selectedOption,i=n[a.author],l=n[o].answers;l.hasOwnProperty(a.id)&&(u=l[a.id]);var s=a&&a.optionOne.votes?a.optionOne.votes.length:0,m=a&&a.optionTwo.votes?a.optionTwo.votes.length:0,d=s+m,b=(s/d*100).toFixed(1),p=(m/d*100).toFixed(1);return r.a.createElement("div",null,u?r.a.createElement(x.a,{style:{width:"30rem"}},r.a.createElement(x.a.Body,null,r.a.createElement(x.a.Title,{className:"mb-2"},r.a.createElement("img",{src:i.avatarURL,alt:"Avatar of ".concat(i.name)})," ","Asked by ",i.name),r.a.createElement(x.a.Subtitle,{className:"mb-2 text-muted"},"Results"),r.a.createElement(x.a.Text,null,"Would you rather ",a.optionOne.text,"?"),r.a.createElement(H.a,{now:b,label:"".concat(b,"%")}),r.a.createElement(x.a.Text,null,s," out of ",d," ","  ","optionOne"===u?r.a.createElement(V.a,{pill:!0,variant:"warning"},"your vote"):""),r.a.createElement(x.a.Text,null,"Would you rather ",a.optionTwo.text,"?"),r.a.createElement(H.a,{now:p,label:"".concat(p,"%")}),r.a.createElement(x.a.Text,null,m," out of ",d," ","  ","optionTwo"===u?r.a.createElement(V.a,{pill:!0,variant:"warning"},"your vote"):""))):r.a.createElement(x.a,null,r.a.createElement(x.a.Body,null,r.a.createElement(x.a.Subtitle,{className:"mb-2 text-muted"},r.a.createElement("img",{src:i.avatarURL,alt:"Avatar of ".concat(i.name)})," ",i.name," asks"),r.a.createElement(x.a.Title,null,"Would You rather?"),r.a.createElement(k.a,{onSubmit:this.handleSubmit},r.a.createElement("fieldset",null,r.a.createElement(k.a.Group,null,r.a.createElement(k.a.Check,{onChange:function(t){return e.setState({selectedOption:t.target.value})},type:"radio",value:"optionOne",label:a.optionOne.text,name:"option",id:a.optionOne.text}),r.a.createElement(k.a.Check,{onChange:function(t){return e.setState({selectedOption:t.target.value})},type:"radio",value:"optionTwo",label:a.optionTwo.text,name:"option",id:a.optionOne.text})),r.a.createElement(A.a,{disabled:""===c,type:"submit"},"Submit"))))))}}]),a}(n.Component);var G=Object(m.b)((function(e,t){var a=e.questions,n=e.users,r=e.authedUser,o=t.match.params.id;return{question:a[o]?a[o]:null,users:n,authedUser:r}}),(function(e,t){var a=t.match.params.id;return{saveQuestionAnswer:function(t){e(y(a,t))}}}))(M),J=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.handleInitialData()}},{key:"render",value:function(){var e=this.props.noAuthedUser;return r.a.createElement(d.a,null,r.a.createElement(z,null),r.a.createElement("div",{className:"main-content"},r.a.createElement(b.d,null,e?r.a.createElement(b.b,{path:"/",component:R}):r.a.createElement(b.b,null,r.a.createElement(b.b,{path:"/",exact:!0,component:q}),r.a.createElement(b.b,{path:"/leaderboard",component:W}),r.a.createElement(b.b,{path:"/add",component:B}),r.a.createElement(b.b,{path:"/questions/:id",component:G}),r.a.createElement(b.b,{exact:!0,path:"/logout",component:N})))))}}]),a}(n.Component);var K=Object(m.b)((function(e){return{noAuthedUser:null===e.authedUser}}),(function(e){return{handleInitialData:function(){e(j())}}}))(J),Y=a(25);var $=Object(Y.c)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_USERS":return Object(v.a)(Object(v.a)({},e),t.users);case"USER_ANSWER_QUESTION":return Object(v.a)(Object(v.a)({},e),{},Object(h.a)({},t.auth,Object(v.a)(Object(v.a)({},e[t.auth]),{},{answers:Object(v.a)(Object(v.a)({},e[t.auth].answers),{},Object(h.a)({},t.qid,t.option))})));case"ADD_USER_QUESTION":return Object(v.a)(Object(v.a)({},e),{},Object(h.a)({},t.authedUser,Object(v.a)(Object(v.a)({},e[t.authedUser]),{},{questions:e[t.authedUser].questions.concat([t.qid])})));default:return e}},questions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_QUESTIONS":return Object(v.a)(Object(v.a)({},e),t.questions);case"ADD_QUESTION":var a=t.question;return Object(v.a)(Object(v.a)({},e),{},Object(h.a)({},a.id,a));case"SAVE_QUESTION_ANSWER":var n=t.authedUser,r=t.qid,o=t.answer;return Object(v.a)(Object(v.a)({},e),{},Object(h.a)({},r,Object(v.a)(Object(v.a)({},e[r]),{},Object(h.a)({},o,Object(v.a)(Object(v.a)({},e[r][o]),{},{votes:e[r][o].votes.concat([n])})))));default:return e}},authedUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AUTHED_USER":return t.id;case"CLEAR_AUTHED_USER":return null;default:return e}}}),X=a(62),Z=function(e){return function(t){return function(a){console.group(a.type),console.log("The action: ",a);var n=t(a);return console.log("The new state: ",e.getState()),console.groupEnd(),n}}},ee=Object(Y.a)(X.a,Z),te=(a(77),Object(Y.d)($,ee));u.a.render(r.a.createElement(m.a,{store:te},r.a.createElement(K,null)),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.ab1b49cf.chunk.js.map